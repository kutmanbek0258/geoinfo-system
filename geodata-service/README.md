# User Service

Этот сервис отвечает за управление профилями пользователей, их адресами и другими данными, не связанными с аутентификацией.

## Описание

Сервис предоставляет REST API для аутентифицированных пользователей для управления информацией своего профиля. Он тесно интегрирован с `auth-service`, используя `UUID` пользователя в качестве основного идентификатора.

## Технологии

*   **Java 17**
*   **Spring Boot 3.2.5**
*   **Spring Cloud**
*   **PostgreSQL**
*   **Liquibase**
*   **MapStruct**
*   **Maven**

## API Endpoints

Все эндпоинты доступны по префиксу `/api/v1/profile` и требуют валидного Bearer Token.

---

### 1. Профиль пользователя

*   **GET** `/me`
    *   **Описание:** Получает полную информацию о профиле текущего пользователя.
    *   **Ответ (200 OK):** Объект `UserDto`.

*   **PUT** `/me`
    *   **Описание:** Обновляет информацию в профиле текущего пользователя.
    *   **Тело запроса:** `UpdateUserDto`.
    *   **Ответ (200 OK):** Обновленный объект `UserDto`.

---

### 2. Адреса доставки

*   **GET** `/addresses`
    *   **Описание:** Получает список всех адресов доставки текущего пользователя.
    *   **Ответ (200 OK):** Массив объектов `UserAddressDto`.

*   **POST** `/addresses`
    *   **Описание:** Добавляет новый адрес доставки для текущего пользователя.
    *   **Тело запроса:** `CreateAddressDto`.
    *   **Ответ (201 Created):** Созданный объект `UserAddressDto`.

*   **PUT** `/addresses/{addressId}`
    *   **Описание:** Обновляет существующий адрес доставки.
    *   **Ответ (200 OK):** Обновленный объект `UserAddressDto`.

*   **DELETE** `/addresses/{addressId}`
    *   **Описание:** Удаляет адрес доставки.
    *   **Ответ (204 No Content):** Пустой ответ в случае успеха.

---

### 3. Избранные товары (Post-MVP)

*   **GET** `/favorites`
    *   **Описание:** Получает список избранных товаров пользователя.

*   **POST** `/favorites`
    *   **Описание:** Добавляет товар в избранное.

*   **DELETE** `/favorites/{favoriteId}`
    *   **Описание:** Удаляет товар из избранного.

## Локальный запуск

1.  **Настройте базу данных:**
    *   Убедитесь, что у вас запущен PostgreSQL.
    *   Создайте базу данных (например, `geodata_db`) и схему (`users`).
    *   Настройте подключение в `application.yml` или через переменные окружения.

2.  **Запустите зависимости:**
    *   Убедитесь, что запущены `config-server`, `discovery-server` и `auth-service`.

3.  **Сборка и запуск:**
    *   Выполните команду Maven для сборки проекта:
        ```bash
        mvn clean install
        ```
    *   Запустите приложение:
        ```bash
        java -jar target/geodata-service.jar
        ```