# Сервис Аутентификации (Auth Service)

Сервис `auth-service` является центральным компонентом платформы "GeoInfo System", отвечающим за управление идентификацией и доступом пользователей. Он обрабатывает регистрацию, вход, а также выдачу и проверку токенов доступа.

## Основные возможности

-   Регистрация новых пользователей.
-   Аутентификация пользователей по логину и паролю.
-   Генерация JSON Web Tokens (JWT) при успешном входе.
-   Валидация и обновление (refresh) токенов.
-   Предоставление пользовательского интерфейса для страниц входа и регистрации.

## Архитектура

Сервис имеет гибридную архитектуру и состоит из двух частей:

1.  **Backend API (Java/Spring Boot)**: REST API, реализующее всю бизнес-логику аутентификации.
2.  **Client (Vue.js)**: Небольшое фронтенд-приложение, расположенное в папке `/client`, которое предоставляет пользователям UI для взаимодействия с сервисом (формы входа, регистрации и т.д.).

## Технологический стек

### Backend
-   **Java 17+**
-   **Spring Boot**
-   **Spring Security** для управления безопасностью.
-   **Maven** для сборки проекта.
-   **Liquibase** для миграций базы данных.
-   **PostgreSQL** (предположительно) в качестве основной СУБД.
-   **JJWT** для работы с JSON Web Tokens.

### Client
-   **Vue.js**
-   **Node.js / npm** для управления зависимостями и запуска.
-   **Axios** для выполнения HTTP-запросов к бэкенду.

## Ключевые эндпоинты API

> **Примечание:** Список может быть неполным. Для получения полной спецификации обратитесь к Postman-коллекции проекта.

-   `POST /api/auth/register` - Регистрация нового пользователя.
-   `POST /api/auth/login` - Вход пользователя и выдача токенов (access и refresh).
-   `POST /api/auth/refresh` - Обновление пары токенов с помощью refresh-токена.
-   `GET /api/auth/validate` - Проверка валидности access-токена.

## Запуск и разработка

### Необходимые компоненты
-   **JDK 17** или выше
-   **Apache Maven**
-   **Node.js и npm**
-   **Docker** и **Docker Compose**

### 1. Настройка базы данных
1.  Создайте базу данных PostgreSQL для сервиса.
2.  Настройте подключение в файле `src/main/resources/application.properties` (или через переменные окружения).
3.  При первом запуске **Liquibase** автоматически применит все необходимые миграции для создания схемы БД.

### 2. Запуск Backend (Java API)

```bash
# Перейдите в директорию сервиса
cd /data/data/com.termux/files/home/geoinfo-system/auth-service

# Соберите проект и запустите его
mvn spring-boot:run
```
Сервер запустится на порту, указанном в `application.properties` (например, 8081).

### 3. Запуск Client (Vue.js UI)

```bash
# Перейдите в директорию клиента
cd /data/data/com.termux/files/home/geoinfo-system/auth-service/client

# Установите зависимости
npm install

# Запустите сервер для разработки
npm run serve
```
Клиентское приложение будет доступно по адресу `http://localhost:8080` (или другому порту, указанному в конфигурации).

## Запуск с помощью Docker

Самый простой способ запустить сервис — использовать Docker Compose из корневой директории проекта.

```bash
# Из корня проекта /data/data/com.termux/files/home/geoinfo-system
# Запустить только auth-service и его зависимости (например, базу данных)
docker-compose up -d auth-service

# Чтобы запустить все сервисы
docker-compose up -d
```